<div
  class="contact-form-3-container min-h-screen flex items-center justify-center p-4"
  data-testid="contact-form-3-container"
  >
  <div
    class="contact-form-3-wrapper max-w-5xl w-full flex flex-col md:flex-row overflow-hidden shadow-xl rounded-xl"
    data-testid="contact-form-3-wrapper"
    >
    <!-- Left side info panel -->
    <div
      class="bg-gradient-to-br from-primary-600 to-primary-900 text-white p-8 md:w-2/5 flex flex-col justify-between"
      data-testid="contact-form-3-left-panel"
      >
      <div data-testid="contact-form-3-left-header">
        <h1 class="text-3xl font-bold mb-4" data-testid="contact-form-3-left-title">
          Get in Touch
        </h1>
        <p class="text-primary-100 mb-6" data-testid="contact-form-3-left-subtitle">
          We'd love to hear from you. Fill out the form and our team will get back to you as soon as
          possible.
        </p>
      </div>

      <!-- Contact information -->
      <div class="space-y-6 mt-12 md:mt-0" data-testid="contact-form-3-contact-info">
        <div class="flex items-start space-x-3" data-testid="contact-form-3-address">
          <div class="mt-1 text-primary-200">
            <i class="pi pi-map-marker text-xl"></i>
          </div>
          <div>
            <h3 class="font-semibold mb-1">Visit Us</h3>
            <p class="text-primary-100 text-sm">123 Company Street</p>
            <p class="text-primary-100 text-sm">Suite 101</p>
            <p class="text-primary-100 text-sm">City, State 12345</p>
          </div>
        </div>

        <div class="flex items-start space-x-3" data-testid="contact-form-3-email">
          <div class="mt-1 text-primary-200">
            <i class="pi pi-envelope text-xl"></i>
          </div>
          <div>
            <h3 class="font-semibold mb-1">Email Us</h3>
            <p class="text-primary-100 text-sm">contact&#64;example.com</p>
            <p class="text-primary-100 text-sm">support&#64;example.com</p>
          </div>
        </div>

        <div class="flex items-start space-x-3" data-testid="contact-form-3-phone">
          <div class="mt-1 text-primary-200">
            <i class="pi pi-phone text-xl"></i>
          </div>
          <div>
            <h3 class="font-semibold mb-1">Call Us</h3>
            <p class="text-primary-100 text-sm">+1 (555) 123-4567</p>
            <p class="text-primary-100 text-sm">Mon-Fri, 9am-5pm</p>
          </div>
        </div>
      </div>

      <!-- Social media icons -->
      <div class="mt-8 flex space-x-4" data-testid="contact-form-3-social">
        <a
          aria-label="Facebook"
          class="text-white hover:text-primary-200 transition-colors"
          href="#"
          >
          <i class="pi pi-facebook text-xl"></i>
        </a>
        <a
          aria-label="Twitter"
          class="text-white hover:text-primary-200 transition-colors"
          href="#"
          >
          <i class="pi pi-twitter text-xl"></i>
        </a>
        <a
          aria-label="LinkedIn"
          class="text-white hover:text-primary-200 transition-colors"
          href="#"
          >
          <i class="pi pi-linkedin text-xl"></i>
        </a>
        <a
          aria-label="Instagram"
          class="text-white hover:text-primary-200 transition-colors"
          href="#"
          >
          <i class="pi pi-instagram text-xl"></i>
        </a>
      </div>
    </div>

    <!-- Right side form panel -->
    <div class="bg-white p-8 md:w-3/5" data-testid="contact-form-3-right-panel">
      <!-- Success message -->
      @if (formSuccess) {
        <div
          class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6"
          data-testid="contact-form-3-success"
          >
          <div class="flex">
            <i class="pi pi-check-circle text-green-500 mr-3 text-xl"></i>
            <div>
              <p class="font-medium">{{ formSuccess }}</p>
              <p class="text-sm mt-1">We've received your message and will get back to you soon.</p>
            </div>
          </div>
        </div>
      }

      <!-- Error message -->
      @if (formError) {
        <div
          class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6"
          data-testid="contact-form-3-error"
          >
          <div class="flex">
            <i class="pi pi-exclamation-circle text-red-500 mr-3 text-xl"></i>
            <div>
              <p class="font-medium">Error</p>
              <p class="text-sm mt-1">{{ formError }}</p>
            </div>
          </div>
        </div>
      }

      <div class="text-center md:text-left mb-8" data-testid="contact-form-3-right-header">
        <h2 class="text-2xl font-bold text-gray-800" data-testid="contact-form-3-right-title">
          {{ title }}
        </h2>
        <p class="text-gray-600 mt-1" data-testid="contact-form-3-right-subtitle">
          We'll get back to you as quickly as possible
        </p>
      </div>

      <form
        (ngSubmit)="onSubmit()"
        [formGroup]="contactForm"
        class="space-y-6"
        data-testid="contact-form-3-form"
        >
        <!-- Name and Email in one row for larger screens -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Name input -->
          <div data-testid="contact-form-3-name-field">
            <label
              class="block text-gray-700 font-medium mb-2"
              data-testid="contact-form-3-name-label"
              for="name"
              >Name</label
              >
              <div class="relative">
                <span
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500"
                  >
                  <i class="pi pi-user"></i>
                </span>
                <input
                  [ngClass]="{'ng-invalid ng-dirty': submitted && name?.errors}"
                  class="w-full pl-10"
                  data-testid="contact-form-3-name-input"
                  formControlName="name"
                  id="name"
                  pInputText
                  placeholder="Your name"
                  />
              </div>
              @if (submitted && name?.errors) {
                <small
                  class="p-error block mt-1"
                  data-testid="contact-form-3-name-error"
                  >
                  @if (name?.errors?.['required']) {
                    <span>Name is required</span>
                  }
                  @if (name?.errors?.['minlength']) {
                    <span>Name must be at least 2 characters</span>
                  }
                </small>
              }
            </div>

            <!-- Email input -->
            <div data-testid="contact-form-3-email-field">
              <label
                class="block text-gray-700 font-medium mb-2"
                data-testid="contact-form-3-email-label"
                for="email"
                >Email</label
                >
                <div class="relative">
                  <span
                    class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500"
                    >
                    <i class="pi pi-envelope"></i>
                  </span>
                  <input
                    [ngClass]="{'ng-invalid ng-dirty': submitted && email?.errors}"
                    class="w-full pl-10"
                    data-testid="contact-form-3-email-input"
                    formControlName="email"
                    id="email"
                    pInputText
                    placeholder="Your email address"
                    type="email"
                    />
                </div>
                @if (submitted && email?.errors) {
                  <small
                    class="p-error block mt-1"
                    data-testid="contact-form-3-email-error"
                    >
                    @if (email?.errors?.['required']) {
                      <span>Email is required</span>
                    }
                    @if (email?.errors?.['email']) {
                      <span>Please enter a valid email address</span>
                    }
                  </small>
                }
              </div>
            </div>

            <!-- Phone and Subject in one row for larger screens -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Phone field -->
              @if (features.showPhoneField) {
                <div data-testid="contact-form-3-phone-field">
                  <label
                    class="block text-gray-700 font-medium mb-2"
                    data-testid="contact-form-3-phone-label"
                    for="phone"
                    >Phone (Optional)</label
                    >
                    <div class="relative">
                      <span
                        class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500"
                        >
                        <i class="pi pi-phone"></i>
                      </span>
                      <input
                        [ngClass]="{'ng-invalid ng-dirty': submitted && phone?.errors}"
                        class="w-full pl-10"
                        data-testid="contact-form-3-phone-input"
                        formControlName="phone"
                        id="phone"
                        pInputText
                        placeholder="Your phone number"
                        type="tel"
                        />
                    </div>
                    @if (submitted && phone?.errors) {
                      <small
                        class="p-error block mt-1"
                        data-testid="contact-form-3-phone-error"
                        >
                        @if (phone?.errors?.['invalidPhone']) {
                          <span>Please enter a valid phone number</span>
                        }
                      </small>
                    }
                  </div>
                }

                <!-- Subject field -->
                @if (features.showSubjectField) {
                  <div data-testid="contact-form-3-subject-field">
                    <label
                      class="block text-gray-700 font-medium mb-2"
                      data-testid="contact-form-3-subject-label"
                      for="subject"
                      >Subject</label
                      >
                      <div class="relative">
                        <span
                          class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500"
                          >
                          <i class="pi pi-tag"></i>
                        </span>
                        <input
                          [ngClass]="{'ng-invalid ng-dirty': submitted && subject?.errors}"
                          class="w-full pl-10"
                          data-testid="contact-form-3-subject-input"
                          formControlName="subject"
                          id="subject"
                          pInputText
                          placeholder="Subject of your message"
                          />
                      </div>
                      @if (submitted && subject?.errors) {
                        <small
                          class="p-error block mt-1"
                          data-testid="contact-form-3-subject-error"
                          >
                          @if (subject?.errors?.['required']) {
                            <span>Subject is required</span>
                          }
                          @if (subject?.errors?.['minlength']) {
                            <span>
                              Subject must be at least 3 characters
                            </span>
                          }
                        </small>
                      }
                    </div>
                  }
                </div>

                <!-- Message textarea -->
                <div data-testid="contact-form-3-message-field">
                  <label
                    class="block text-gray-700 font-medium mb-2"
                    data-testid="contact-form-3-message-label"
                    for="message"
                    >Message</label
                    >
                    <textarea
                      [ngClass]="{'ng-invalid ng-dirty': submitted && message?.errors}"
                      [rows]="6"
                      class="w-full"
                      data-testid="contact-form-3-message-input"
                      formControlName="message"
                      id="message"
                      pInputTextarea
                      placeholder="Type your message here..."
                    ></textarea>
                    @if (submitted && message?.errors) {
                      <small
                        class="p-error block mt-1"
                        data-testid="contact-form-3-message-error"
                        >
                        @if (message?.errors?.['required']) {
                          <span>Message is required</span>
                        }
                        @if (message?.errors?.['minlength']) {
                          <span
                            >Message must be at least 10 characters</span
                            >
                          }
                        </small>
                      }
                    </div>

                    <!-- Submit button -->
                    <button
                      [disabled]="contactForm.invalid || isSubmitting"
                      [loading]="isSubmitting"
                      class="w-full p-3 text-center"
                      data-testid="contact-form-3-submit-button"
                      icon="pi pi-send"
                      iconPos="right"
                      label="{{ submitButtonText }}"
                      pButton
                      pRipple
                      type="submit"
                    ></button>
                  </form>
                </div>
              </div>
            </div>
            <p-toast></p-toast>
