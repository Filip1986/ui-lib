<div
  class="flex items-center justify-center min-h-screen"
  data-testid="forgot-password-1-container"
  >
  <div class="w-full max-w-md">
    <p-card data-testid="forgot-password-1-card" styleClass="forgot-password-1-card">
      <!-- Header template -->
      <ng-template pTemplate="header">
        <div class="p-4 text-white text-center" data-testid="forgot-password-1-header">
          <h2 class="text-2xl font-bold m-0" data-testid="forgot-password-1-title">{{ title }}</h2>
          <p class="text-sm opacity-80 mt-1 mb-0" data-testid="forgot-password-1-subtitle">
            Reset your account password
          </p>
        </div>
      </ng-template>

      <div class="px-4 py-6" data-testid="forgot-password-1-content">
        @if (!resetLinkSent()) {
          <p class="mb-4 text-center" data-testid="forgot-password-1-instructions">
            Enter your email address and we'll send you a link to reset your password.
          </p>
          <form
            (ngSubmit)="onSubmit()"
            [formGroup]="forgotPasswordForm"
            data-testid="forgot-password-1-form"
            >
            <div class="mb-4" data-testid="forgot-password-1-email-field">
              <lib-input-text
                [config]="emailConfig"
                [errorMessage]="submitted && email?.errors ?
                  (email?.errors?.['required'] ? 'Email is required' :
                   email?.errors?.['email'] ? 'Please enter a valid email address' : '') : ''"
                data-testid="forgot-password-1-email-input"
                formControlName="email"
                />
            </div>
            <div class="mb-4" data-testid="forgot-password-1-submit-container">
              <button
                [disabled]="forgotPasswordForm.invalid || isSubmitting"
                [loading]="isSubmitting"
                aria-label="Send Reset Link"
                class="w-full"
                data-testid="forgot-password-1-submit-button"
                label="Send Reset Link"
                pButton
                type="submit"
              ></button>
            </div>
          </form>
          @if (features.showLoginLink) {
            <div
              class="text-center mt-4"
              data-testid="forgot-password-1-login-link-container"
              >
              <a
                (click)="navigateToLogin()"
                (keydown.enter)="navigateToLogin()"
                class="cursor-pointer"
                data-testid="forgot-password-1-login-link"
                tabindex="0"
                >
                Back to login
              </a>
            </div>
          }
        }

        @if (resetLinkSent()) {
          <div class="text-center py-6" data-testid="forgot-password-1-success">
            <i class="pi pi-check-circle text-5xl mb-4 text-green-500"></i>
            <h3 class="text-xl font-semibold mb-2">Reset Link Sent!</h3>
            <p class="mb-6">
              We've sent password reset instructions to your email address. Please check your inbox
              and follow the instructions.
            </p>
            <button
              (click)="navigateToLogin()"
              aria-label="Back to Login"
              class="w-full"
              data-testid="forgot-password-1-back-button"
              label="Back to Login"
              pButton
              type="button"
            ></button>
          </div>
        }
      </div>
    </p-card>
  </div>
</div>

<p-toast />
