<div [ngClass]="inputContainerClass">
  <!-- Default label style -->
  @if (config.labelStyle === labelStyles.DEFAULT) {
    <!-- Label positioned above the input (default) -->
    @if (config.labelPosition === labelPositions.ABOVE || !config.labelPosition) {
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        labelClass="input-label"
        />
      <div [class.has-error]="hasErrors" class="input-wrapper">
        <!-- With icon -->
        @if (config.icon) {
          <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
            <p-inputicon (click)="onIconClick($event)" [class]="config.icon" />
            <input
              (blur)="onBlur($event)"
              (focus)="onFocus($event)"
              (keydown)="onKeydown($event)"
              (keyup)="onKeyup($event)"
              [attr.inputmode]="config.inputMode || inputModes.TEXT"
              [attr.max]="config.max"
              [attr.maxlength]="config.maxLength"
              [attr.min]="config.min"
              [attr.minlength]="config.minLength"
              [attr.pattern]="config.pattern"
              [attr.step]="config.step"
              [autocomplete]="config.autocomplete || 'off'"
              [formControl]="inputControl"
              [id]="config.id"
              [ngClass]="getClasses(config.inputClass)"
              [pAutoFocus]="config.autofocus"
              [placeholder]="config.placeholder || ''"
              [required]="config.required"
              [type]="config.type || inputTypes.TEXT"
              pInputText
              />
          </p-iconfield>
        }
        <!-- Without icon -->
        @if (!config.icon) {
          <input
            (blur)="onBlur($event)"
            (focus)="onFocus($event)"
            (keydown)="onKeydown($event)"
            (keyup)="onKeyup($event)"
            [attr.inputmode]="config.inputMode || inputModes.TEXT"
            [attr.max]="config.max"
            [attr.maxlength]="config.maxLength"
            [attr.min]="config.min"
            [attr.minlength]="config.minLength"
            [attr.pattern]="config.pattern"
            [attr.step]="config.step"
            [autocomplete]="config.autocomplete || 'off'"
            [formControl]="inputControl"
            [id]="config.id"
            [ngClass]="getClasses(config.inputClass)"
            [pAutoFocus]="config.autofocus"
            [placeholder]="config.placeholder || ''"
            [required]="config.required"
            [type]="config.type || inputTypes.TEXT"
            class="w-full"
            pInputText
            />
        }
        <!-- Message row - aligned with input, not label -->
        <div class="mt-1">
          <lib-message-container
            [hasErrors]="hasErrors"
            [helperText]="config.helperText"
            [isValid]="isValid"
            [successMessage]="config.successMessage"
            [touched]="touched"
            [validationMessage]="validationMessage"
            />
        </div>
      </div>
    }
    <!-- Label positioned inline (new option) -->
    @if (config.labelPosition === labelPositions.INLINE) {
      <div class="flex flex-col">
        <!-- Input row with aligned label -->
        <div class="flex items-center gap-2">
          <!-- Label container with fixed height matching the input -->
          <div class="inline-label-container">
            <lib-form-label
              [for]="config.id"
              [label]="config.label"
              [position]="config.labelPosition"
              [required]="config.required"
              labelClass="input-label inline-label whitespace-nowrap"
              />
          </div>
          <!-- Input container -->
          <div class="flex-1">
            <div [class.has-error]="hasErrors" class="input-wrapper w-full">
              <!-- With icon -->
              @if (config.icon) {
                <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
                  <p-inputicon (click)="onIconClick($event)" [class]="config.icon" />
                  <input
                    (blur)="onBlur($event)"
                    (focus)="onFocus($event)"
                    (keydown)="onKeydown($event)"
                    (keyup)="onKeyup($event)"
                    [attr.inputmode]="config.inputMode || inputModes.TEXT"
                    [attr.max]="config.max"
                    [attr.maxlength]="config.maxLength"
                    [attr.min]="config.min"
                    [attr.minlength]="config.minLength"
                    [attr.pattern]="config.pattern"
                    [attr.step]="config.step"
                    [autocomplete]="config.autocomplete || 'off'"
                    [formControl]="inputControl"
                    [id]="config.id"
                    [ngClass]="getClasses(config.inputClass)"
                    [pAutoFocus]="config.autofocus"
                    [placeholder]="config.placeholder || ''"
                    [required]="config.required"
                    [type]="config.type || inputTypes.TEXT"
                    pInputText
                    />
                </p-iconfield>
              }
              <!-- Without icon -->
              @if (!config.icon) {
                <input
                  (blur)="onBlur($event)"
                  (focus)="onFocus($event)"
                  (keydown)="onKeydown($event)"
                  (keyup)="onKeyup($event)"
                  [attr.inputmode]="config.inputMode || inputModes.TEXT"
                  [attr.max]="config.max"
                  [attr.maxlength]="config.maxLength"
                  [attr.min]="config.min"
                  [attr.minlength]="config.minLength"
                  [attr.pattern]="config.pattern"
                  [attr.step]="config.step"
                  [autocomplete]="config.autocomplete || 'off'"
                  [formControl]="inputControl"
                  [id]="config.id"
                  [ngClass]="getClasses(config.inputClass)"
                  [pAutoFocus]="config.autofocus"
                  [placeholder]="config.placeholder || ''"
                  [required]="config.required"
                  [type]="config.type || inputTypes.TEXT"
                  class="w-full"
                  pInputText
                  />
              }
              <!-- Message row - aligned with input, not label -->
              <div class="mt-1">
                <lib-message-container
                  [hasErrors]="hasErrors"
                  [helperText]="config.helperText"
                  [isValid]="isValid"
                  [successMessage]="config.successMessage"
                  [touched]="touched"
                  [validationMessage]="validationMessage"
                  />
              </div>
            </div>
          </div>
        </div>
      </div>
    }
  }

  <!-- Standard Float label style -->
  @if (config.labelStyle === labelStyles.FLOAT) {
    <p-floatlabel>
      <!-- With icon -->
      @if (config.icon) {
        <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
          <p-inputicon (click)="onIconClick($event)" [class]="config.icon"></p-inputicon>
          <input
            (blur)="onBlur($event)"
            (focus)="onFocus($event)"
            (keydown)="onKeydown($event)"
            (keyup)="onKeyup($event)"
            [attr.inputmode]="config.inputMode || inputModes.TEXT"
            [attr.max]="config.max"
            [attr.maxlength]="config.maxLength"
            [attr.min]="config.min"
            [attr.minlength]="config.minLength"
            [attr.pattern]="config.pattern"
            [attr.step]="config.step"
            [autocomplete]="config.autocomplete || 'off'"
            [formControl]="inputControl"
            [id]="config.id"
            [ngClass]="getClasses(config.inputClass)"
            [pAutoFocus]="config.autofocus"
            [required]="config.required"
            [type]="config.type || inputTypes.TEXT"
            pInputText
            />
        </p-iconfield>
      }
      <!-- Without icon -->
      @if (!config.icon) {
        <input
          (blur)="onBlur($event)"
          (focus)="onFocus($event)"
          (keydown)="onKeydown($event)"
          (keyup)="onKeyup($event)"
          [attr.inputmode]="config.inputMode || inputModes.TEXT"
          [attr.max]="config.max"
          [attr.maxlength]="config.maxLength"
          [attr.min]="config.min"
          [attr.minlength]="config.minLength"
          [attr.pattern]="config.pattern"
          [attr.step]="config.step"
          [autocomplete]="config.autocomplete || 'off'"
          [formControl]="inputControl"
          [id]="config.id"
          [ngClass]="getClasses(config.inputClass)"
          [pAutoFocus]="config.autofocus"
          [required]="config.required"
          [type]="config.type || inputTypes.TEXT"
          pInputText
          />
      }
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
    <!-- Message row - aligned with input, not label -->
    <div class="mt-1">
      <lib-message-container
        [hasErrors]="hasErrors"
        [helperText]="config.helperText"
        [isValid]="isValid"
        [successMessage]="config.successMessage"
        [touched]="touched"
        [validationMessage]="validationMessage"
        />
    </div>
  }

  <!-- Float "in" label style -->
  @if (config.labelStyle === labelStyles.FLOAT_IN) {
    <p-floatlabel variant="in">
      <!-- With icon -->
      @if (config.icon) {
        <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
          <p-inputicon (click)="onIconClick($event)" [class]="config.icon"></p-inputicon>
          <input
            (blur)="onBlur($event)"
            (focus)="onFocus($event)"
            (keydown)="onKeydown($event)"
            (keyup)="onKeyup($event)"
            [attr.inputmode]="config.inputMode || inputModes.TEXT"
            [attr.max]="config.max"
            [attr.maxlength]="config.maxLength"
            [attr.min]="config.min"
            [attr.minlength]="config.minLength"
            [attr.pattern]="config.pattern"
            [attr.step]="config.step"
            [autocomplete]="config.autocomplete || 'off'"
            [formControl]="inputControl"
            [id]="config.id"
            [ngClass]="getClasses(config.inputClass)"
            [pAutoFocus]="config.autofocus"
            [required]="config.required"
            [type]="config.type || inputTypes.TEXT"
            pInputText
            />
        </p-iconfield>
      }
      <!-- Without icon -->
      @if (!config.icon) {
        <input
          (blur)="onBlur($event)"
          (focus)="onFocus($event)"
          (keydown)="onKeydown($event)"
          (keyup)="onKeyup($event)"
          [attr.inputmode]="config.inputMode || inputModes.TEXT"
          [attr.max]="config.max"
          [attr.maxlength]="config.maxLength"
          [attr.min]="config.min"
          [attr.minlength]="config.minLength"
          [attr.pattern]="config.pattern"
          [attr.step]="config.step"
          [autocomplete]="config.autocomplete || 'off'"
          [formControl]="inputControl"
          [id]="config.id"
          [ngClass]="getClasses(config.inputClass)"
          [pAutoFocus]="config.autofocus"
          [required]="config.required"
          [type]="config.type || inputTypes.TEXT"
          class="w-full"
          pInputText
          />
      }
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
  }

  <!-- Float "on" label style -->
  @if (config.labelStyle === labelStyles.FLOAT_ON) {
    <p-floatlabel variant="on">
      <!-- With icon -->
      @if (config.icon) {
        <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
          <p-inputicon (click)="onIconClick($event)" [class]="config.icon"></p-inputicon>
          <input
            (blur)="onBlur($event)"
            (focus)="onFocus($event)"
            (keydown)="onKeydown($event)"
            (keyup)="onKeyup($event)"
            [attr.inputmode]="config.inputMode || inputModes.TEXT"
            [attr.max]="config.max"
            [attr.maxlength]="config.maxLength"
            [attr.min]="config.min"
            [attr.minlength]="config.minLength"
            [attr.pattern]="config.pattern"
            [attr.step]="config.step"
            [autocomplete]="config.autocomplete || 'off'"
            [formControl]="inputControl"
            [id]="config.id"
            [ngClass]="getClasses(config.inputClass)"
            [pAutoFocus]="config.autofocus"
            [required]="config.required"
            [type]="config.type || inputTypes.TEXT"
            pInputText
            />
        </p-iconfield>
      }
      <!-- Without icon -->
      @if (!config.icon) {
        <input
          (blur)="onBlur($event)"
          (focus)="onFocus($event)"
          (keydown)="onKeydown($event)"
          (keyup)="onKeyup($event)"
          [attr.inputmode]="config.inputMode || inputModes.TEXT"
          [attr.max]="config.max"
          [attr.maxlength]="config.maxLength"
          [attr.min]="config.min"
          [attr.minlength]="config.minLength"
          [attr.pattern]="config.pattern"
          [attr.step]="config.step"
          [autocomplete]="config.autocomplete || 'off'"
          [formControl]="inputControl"
          [id]="config.id"
          [ngClass]="getClasses(config.inputClass)"
          [pAutoFocus]="config.autofocus"
          [required]="config.required"
          [type]="config.type || inputTypes.TEXT"
          class="w-full"
          pInputText
          />
      }
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
  }

  <!-- Ifta label style -->
  @if (config.labelStyle === labelStyles.IFTA) {
    <p-iftalabel>
      <!-- With icon -->
      @if (config.icon) {
        <p-iconfield [iconPosition]="config.iconPosition || iconPositions.LEFT">
          <p-inputicon (click)="onIconClick($event)" [class]="config.icon"></p-inputicon>
          <input
            (blur)="onBlur($event)"
            (focus)="onFocus($event)"
            (keydown)="onKeydown($event)"
            (keyup)="onKeyup($event)"
            [attr.inputmode]="config.inputMode || inputModes.TEXT"
            [attr.max]="config.max"
            [attr.maxlength]="config.maxLength"
            [attr.min]="config.min"
            [attr.minlength]="config.minLength"
            [attr.pattern]="config.pattern"
            [attr.step]="config.step"
            [autocomplete]="config.autocomplete || 'off'"
            [formControl]="inputControl"
            [id]="config.id"
            [ngClass]="getClasses(config.inputClass)"
            [pAutoFocus]="config.autofocus"
            [placeholder]="config.placeholder || ''"
            [required]="config.required"
            [type]="config.type || inputTypes.TEXT"
            pInputText
            />
        </p-iconfield>
      }
      <!-- Without icon -->
      @if (!config.icon) {
        <input
          (blur)="onBlur($event)"
          (focus)="onFocus($event)"
          (keydown)="onKeydown($event)"
          (keyup)="onKeyup($event)"
          [attr.inputmode]="config.inputMode || inputModes.TEXT"
          [attr.max]="config.max"
          [attr.maxlength]="config.maxLength"
          [attr.min]="config.min"
          [attr.minlength]="config.minLength"
          [attr.pattern]="config.pattern"
          [attr.step]="config.step"
          [autocomplete]="config.autocomplete || 'off'"
          [formControl]="inputControl"
          [id]="config.id"
          [ngClass]="getClasses(config.inputClass)"
          [pAutoFocus]="config.autofocus"
          [placeholder]="config.placeholder || ''"
          [required]="config.required"
          [type]="config.type || inputTypes.TEXT"
          class="w-full"
          pInputText
          />
      }
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
      <!-- Helper text and validation messages -->
      <lib-message-container
        [hasErrors]="hasErrors"
        [helperText]="config.helperText"
        [isValid]="isValid"
        [successMessage]="config.successMessage"
        [touched]="touched"
        [validationMessage]="validationMessage"
        />
    </p-iftalabel>
  }
</div>
