<div [ngClass]="datePickerContainerClass">
  <!-- Default label style -->
  @if (config.labelStyle === labelStyles.DEFAULT) {
    <!-- Label positioned above the input (default) -->
    @if (config.labelPosition === labelPositions.ABOVE || !config.labelPosition) {
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        labelClass="date-picker-label"
        />
      <div [class.has-error]="hasErrors" class="date-picker-wrapper">
        <!-- Non-inline date picker -->
        @if (!config.inline) {
          <p-datepicker
            (onBlur)="onBlur($event)"
            (onFocus)="onFocus($event)"
            [dateFormat]="config.dateFormat || defaultDateFormat"
            [formControl]="datePickerControl"
            [hourFormat]="config.hourFormat"
            [iconDisplay]="config.iconDisplay"
            [id]="config.id"
            [maxDate]="config.maxDate"
            [minDate]="config.minDate"
            [ngClass]="getClasses(config.inputClass)"
            [numberOfMonths]="config.numberOfMonths"
            [placeholder]="config.placeholder || ''"
            [readonlyInput]="config.readonlyInput"
            [selectionMode]="config.selectionMode"
            [showButtonBar]="config.showButtonBar"
            [showIcon]="config.showIcon"
            [showTime]="config.showTime"
            [showWeek]="config.showWeek"
            [timeOnly]="config.timeOnly"
            [variant]="config.variant"
            [view]="config.view"
            />
        }
        <!-- Inline date picker -->
        @if (config.inline) {
          <p-datepicker
            [dateFormat]="config.dateFormat || defaultDateFormat"
            [formControl]="datePickerControl"
            [hourFormat]="config.hourFormat"
            [inline]="true"
            [maxDate]="config.maxDate"
            [minDate]="config.minDate"
            [numberOfMonths]="config.numberOfMonths"
            [selectionMode]="config.selectionMode"
            [showButtonBar]="config.showButtonBar"
            [showTime]="config.showTime"
            [showWeek]="config.showWeek"
            [timeOnly]="config.timeOnly"
            [view]="config.view"
            />
        }
        <!-- Message row -->
        <div class="mt-1">
          <lib-message-container
            [hasErrors]="hasErrors"
            [helperText]="config.helperText"
            [isValid]="isValid"
            [successMessage]="config.successMessage"
            [touched]="touched"
            [validationMessage]="validationMessage"
            />
        </div>
      </div>
    }
    <!-- Label positioned inline -->
    @if (config.labelPosition === labelPositions.INLINE) {
      <div class="flex flex-col">
        <!-- Date picker row with aligned label -->
        <div class="flex items-start gap-2">
          <!-- Label container with fixed height matching the input -->
          <div class="inline-label-container">
            <lib-form-label
              [for]="config.id"
              [label]="config.label"
              [position]="config.labelPosition"
              [required]="config.required"
              labelClass="date-picker-label inline-label whitespace-nowrap"
              />
          </div>
          <!-- Date picker container -->
          <div class="flex-1">
            <div [class.has-error]="hasErrors" class="date-picker-wrapper w-full">
              <p-datepicker
                (onBlur)="onBlur($event)"
                (onFocus)="onFocus($event)"
                [dateFormat]="config.dateFormat || defaultDateFormat"
                [formControl]="datePickerControl"
                [hourFormat]="config.hourFormat"
                [iconDisplay]="config.iconDisplay"
                [id]="config.id"
                [maxDate]="config.maxDate"
                [minDate]="config.minDate"
                [ngClass]="getClasses(config.inputClass)"
                [numberOfMonths]="config.numberOfMonths"
                [placeholder]="config.placeholder || ''"
                [readonlyInput]="config.readonlyInput"
                [selectionMode]="config.selectionMode"
                [showButtonBar]="config.showButtonBar"
                [showIcon]="config.showIcon"
                [showTime]="config.showTime"
                [showWeek]="config.showWeek"
                [timeOnly]="config.timeOnly"
                [variant]="config.variant"
                [view]="config.view"
                />
              <!-- Message row -->
              <div class="mt-1">
                <lib-message-container
                  [hasErrors]="hasErrors"
                  [helperText]="config.helperText"
                  [isValid]="isValid"
                  [successMessage]="config.successMessage"
                  [touched]="touched"
                  [validationMessage]="validationMessage"
                  />
              </div>
            </div>
          </div>
        </div>
      </div>
    }
  }

  <!-- Float label styles -->
  @if (config.labelStyle === labelStyles.FLOAT) {
    <p-floatlabel>
      <p-datepicker
        (onBlur)="onBlur($event)"
        (onFocus)="onFocus($event)"
        [dateFormat]="config.dateFormat || defaultDateFormat"
        [formControl]="datePickerControl"
        [hourFormat]="config.hourFormat"
        [iconDisplay]="config.iconDisplay"
        [id]="config.id"
        [maxDate]="config.maxDate"
        [minDate]="config.minDate"
        [ngClass]="getClasses(config.inputClass)"
        [numberOfMonths]="config.numberOfMonths"
        [readonlyInput]="config.readonlyInput"
        [selectionMode]="config.selectionMode"
        [showButtonBar]="config.showButtonBar"
        [showIcon]="config.showIcon"
        [showTime]="config.showTime"
        [showWeek]="config.showWeek"
        [timeOnly]="config.timeOnly"
        [variant]="config.variant"
        [view]="config.view"
        />
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
    <!-- Message row -->
    <div class="mt-1">
      <lib-message-container
        [hasErrors]="hasErrors"
        [helperText]="config.helperText"
        [isValid]="isValid"
        [successMessage]="config.successMessage"
        [touched]="touched"
        [validationMessage]="validationMessage"
        />
    </div>
  }

  <!-- Float "in" label style -->
  @if (config.labelStyle === labelStyles.FLOAT_IN) {
    <p-floatlabel variant="in">
      <p-datepicker
        (onBlur)="onBlur($event)"
        (onFocus)="onFocus($event)"
        [dateFormat]="config.dateFormat || defaultDateFormat"
        [formControl]="datePickerControl"
        [hourFormat]="config.hourFormat"
        [iconDisplay]="config.iconDisplay"
        [id]="config.id"
        [maxDate]="config.maxDate"
        [minDate]="config.minDate"
        [ngClass]="getClasses(config.inputClass)"
        [numberOfMonths]="config.numberOfMonths"
        [readonlyInput]="config.readonlyInput"
        [selectionMode]="config.selectionMode"
        [showButtonBar]="config.showButtonBar"
        [showIcon]="config.showIcon"
        [showTime]="config.showTime"
        [showWeek]="config.showWeek"
        [timeOnly]="config.timeOnly"
        [variant]="config.variant"
        [view]="config.view"
        />
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
    <!-- Message row -->
    <div class="mt-1">
      <lib-message-container
        [hasErrors]="hasErrors"
        [helperText]="config.helperText"
        [isValid]="isValid"
        [successMessage]="config.successMessage"
        [touched]="touched"
        [validationMessage]="validationMessage"
        />
    </div>
  }

  <!-- Float "on" label style -->
  @if (config.labelStyle === labelStyles.FLOAT_ON) {
    <p-floatlabel variant="on">
      <p-datepicker
        (onBlur)="onBlur($event)"
        (onFocus)="onFocus($event)"
        [dateFormat]="config.dateFormat || defaultDateFormat"
        [formControl]="datePickerControl"
        [hourFormat]="config.hourFormat"
        [iconDisplay]="config.iconDisplay"
        [id]="config.id"
        [maxDate]="config.maxDate"
        [minDate]="config.minDate"
        [ngClass]="getClasses(config.inputClass)"
        [numberOfMonths]="config.numberOfMonths"
        [readonlyInput]="config.readonlyInput"
        [selectionMode]="config.selectionMode"
        [showButtonBar]="config.showButtonBar"
        [showIcon]="config.showIcon"
        [showTime]="config.showTime"
        [showWeek]="config.showWeek"
        [timeOnly]="config.timeOnly"
        [variant]="config.variant"
        [view]="config.view"
        />
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
    </p-floatlabel>
    <!-- Message row -->
    <div class="mt-1">
      <lib-message-container
        [hasErrors]="hasErrors"
        [helperText]="config.helperText"
        [isValid]="isValid"
        [successMessage]="config.successMessage"
        [touched]="touched"
        [validationMessage]="validationMessage"
        />
    </div>
  }

  <!-- Ifta label style -->
  @if (config.labelStyle === labelStyles.IFTA) {
    <p-iftalabel>
      <p-datepicker
        (onBlur)="onBlur($event)"
        (onFocus)="onFocus($event)"
        [dateFormat]="config.dateFormat || defaultDateFormat"
        [formControl]="datePickerControl"
        [hourFormat]="config.hourFormat"
        [iconDisplay]="config.iconDisplay"
        [id]="config.id"
        [maxDate]="config.maxDate"
        [minDate]="config.minDate"
        [ngClass]="getClasses(config.inputClass)"
        [numberOfMonths]="config.numberOfMonths"
        [readonlyInput]="config.readonlyInput"
        [selectionMode]="config.selectionMode"
        [showButtonBar]="config.showButtonBar"
        [showIcon]="config.showIcon"
        [showTime]="config.showTime"
        [showWeek]="config.showWeek"
        [timeOnly]="config.timeOnly"
        [variant]="config.variant"
        [view]="config.view"
        />
      <lib-form-label
        [for]="config.id"
        [label]="config.label"
        [position]="config.labelPosition"
        [required]="config.required"
        />
      <!-- Helper text and validation messages -->
      <div class="message-container">
        @if (config.helperText && !hasErrors) {
          <small class="helper-text">
            {{ config.helperText }}
          </small>
        }
        @if (hasErrors) {
          <small class="error-text"> {{ validationMessage }} </small>
        }
      </div>
    </p-iftalabel>
  }
</div>
